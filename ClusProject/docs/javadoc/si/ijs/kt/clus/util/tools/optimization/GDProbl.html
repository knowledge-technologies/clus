<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_40) on Mon May 21 15:59:10 CEST 2018 -->
<title>GDProbl</title>
<meta name="date" content="2018-05-21">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GDProbl";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":9,"i26":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GDProbl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDAlg.html" title="class in si.ijs.kt.clus.util.tools.optimization"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/ImplicitLinearTerms.html" title="class in si.ijs.kt.clus.util.tools.optimization"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?si/ijs/kt/clus/util/tools/optimization/GDProbl.html" target="_top">Frames</a></li>
<li><a href="GDProbl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.si.ijs.kt.clus.util.tools.optimization.OptProbl">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">si.ijs.kt.clus.util.tools.optimization</div>
<h2 title="Class GDProbl" class="title">Class GDProbl</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">si.ijs.kt.clus.util.tools.optimization.OptProbl</a></li>
<li>
<ul class="inheritance">
<li>si.ijs.kt.clus.util.tools.optimization.GDProbl</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">GDProbl</span>
extends <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a></pre>
<div class="block">Class representing a gradient descent optimization problem.
 This gives tool functions for the actual optimization algorithm.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Timo Aho</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.si.ijs.kt.clus.util.tools.optimization.OptProbl">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;si.ijs.kt.clus.util.tools.optimization.<a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a></h3>
<code><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.OptParam.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl.OptParam</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.RulePred.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl.RulePred</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.TrueValues.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl.TrueValues</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_bannedWeights">m_bannedWeights</a></span></code>
<div class="block">Includes the weights that are banned.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_covariances">m_covariances</a></span></code>
<div class="block">Covariances between weights.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_dynStepLowerBound">m_dynStepLowerBound</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_earlyStopProbl">m_earlyStopProbl</a></span></code>
<div class="block">New problem for computing fitness function with the early stop data</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_gradients">m_gradients</a></span></code>
<div class="block">Computed negative gradient averages for each of the dimensions
 [iWeight]</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_isCovComputed">m_isCovComputed</a></span></code>
<div class="block">Is covariance computed for this dimension?
 To reduce computational costs, covariances for certain dimension are computed only if needed
 Weight is always zero if the corresponding coefficient is zero.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_isWeightNonZero">m_isWeightNonZero</a></span></code>
<div class="block">Is the weight nonzero for this run.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_minFitness">m_minFitness</a></span></code>
<div class="block">List of old fitnesses for plateau detection (andy for debugging)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.ArrayList&lt;java.lang.Double&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_minFitWeights">m_minFitWeights</a></span></code>
<div class="block">Weights when the Fitness was minimum</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_nbOfNonZeroRules">m_nbOfNonZeroRules</a></span></code>
<div class="block">Number of rules with nonzero weights.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_predCovWithTrue">m_predCovWithTrue</a></span></code>
<div class="block">Covariances between predictors and true values.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_printGDDebugInformation">m_printGDDebugInformation</a></span></code>
<div class="block">Do we print debugging information.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#m_stepSize">m_stepSize</a></span></code>
<div class="block">Step size for gradient descent</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.si.ijs.kt.clus.util.tools.optimization.OptProbl">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;si.ijs.kt.clus.util.tools.optimization.<a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a></h3>
<code><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#INVALID_PREDICTION">INVALID_PREDICTION</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#m_saveMemoryLinears">m_saveMemoryLinears</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#GDProbl-si.ijs.kt.clus.main.ClusStatManager-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-">GDProbl</a></span>(<a href="../../../../../../../si/ijs/kt/clus/main/ClusStatManager.html" title="class in si.ijs.kt.clus.main">ClusStatManager</a>&nbsp;stat_mgr,
       <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.OptParam.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl.OptParam</a>&nbsp;optInfo)</code>
<div class="block">Constructor for problem to be solved with gradient descent.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeCovariancesIfNeeded-int-">computeCovariancesIfNeeded</a></span>(int&nbsp;iWeight)</code>
<div class="block">Compute the needed covariances for the weight.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeCovFor2Lin-int-int-">computeCovFor2Lin</a></span>(int&nbsp;iPrevious,
                 int&nbsp;iLatter)</code>
<div class="block">For two linear terms.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeCovFor2Preds-int-int-">computeCovFor2Preds</a></span>(int&nbsp;iPrevious,
                   int&nbsp;iLatter)</code>
<div class="block">Compute covariance between two predictions (base learner predictions).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeCovFor2Rules-int-int-">computeCovFor2Rules</a></span>(int&nbsp;iPrevious,
                   int&nbsp;iLatter)</code>
<div class="block">For rules the prediction is always the same.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeCovForRuleAndLin-int-int-">computeCovForRuleAndLin</a></span>(int&nbsp;iRule,
                       int&nbsp;iLinear)</code>
<div class="block">For rule and linear term we skip the instances rule does not cover.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeDynStepSize--">computeDynStepSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computePredVsTrueValueCov-int-">computePredVsTrueValueCov</a></span>(int&nbsp;iPred)</code>
<div class="block">Estimate of expected value of covariance for given prediction.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#computeWeightCov-int-">computeWeightCov</a></span>(int&nbsp;dimension)</code>
<div class="block">Compute the covariances for this weight/prediction dimension.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#dropStepSize-double-">dropStepSize</a></span>(double&nbsp;amount)</code>
<div class="block">In case of oscillation, make the step size shorter
 We should be changing the step size just enough not to prevent further oscillation</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#fullGradientComputation-java.util.ArrayList-">fullGradientComputation</a></span>(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</code>
<div class="block">Compute the gradients for weights from scratch</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getBestFitness--">getBestFitness</a></span>()</code>
<div class="block">Returns best fitness so far.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getCovForPrediction-int-">getCovForPrediction</a></span>(int&nbsp;iPred)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getGradient-int-java.util.ArrayList-">getGradient</a></span>(int&nbsp;iWeightDim,
           java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</code>
<div class="block">Compute gradient for the given weight dimension</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected java.util.ArrayList&lt;java.lang.Double&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getInitialWeightVector--">getInitialWeightVector</a></span>()</code>
<div class="block">Generates a zero vector.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getMaxGradients-int-">getMaxGradients</a></span>(int&nbsp;nbOfIterations)</code>
<div class="block">Return the gradients with maximum absolute value.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#getWeightCov-int-int-">getWeightCov</a></span>(int&nbsp;iFirst,
            int&nbsp;iSecond)</code>
<div class="block">Return the right stored covariance</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#gradientSquared-int-java.util.ArrayList-">gradientSquared</a></span>(int&nbsp;iGradWeightDim,
               java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</code>
<div class="block">Squared loss gradient.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#howMuchWeightChanges-int-">howMuchWeightChanges</a></span>(int&nbsp;iTargetWeight)</code>
<div class="block">Compute the change of target weight because of the gradient</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#initGDForNewRunWithSamePredictions--">initGDForNewRunWithSamePredictions</a></span>()</code>
<div class="block">Initialize GD optimization for new run with same predictions and true values
 This can be used if some parameters change.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#initPredictorVsTrueValuesCovariances--">initPredictorVsTrueValuesCovariances</a></span>()</code>
<div class="block">Compute covariances between predictors and true values.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#isEarlyStop-java.util.ArrayList-">isEarlyStop</a></span>(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</code>
<div class="block">Early stopping is needed if the error rate is too much bigger than the smallest error rate
 we have had.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#modifyGradients-int:A-java.util.ArrayList-">modifyGradients</a></span>(int[]&nbsp;changedWeightIndex,
               java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</code>
<div class="block">Recompute the gradients new iteration.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#modifyGradientSquared-int:A-">modifyGradientSquared</a></span>(int[]&nbsp;iChangedWeights)</code>
<div class="block">Recomputation of gradients for least squares loss function</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#predictWithRule-int-int-int-">predictWithRule</a></span>(int&nbsp;iRule,
               int&nbsp;iInstance,
               int&nbsp;iTarget)</code>
<div class="block">Returns the real prediction when this rule is used.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#printGradientsToFile-int-java.io.PrintWriter-">printGradientsToFile</a></span>(int&nbsp;iterNro,
                    java.io.PrintWriter&nbsp;wrt)</code>
<div class="block">Print gradients to output file.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#randDepthWighExponentialDistribution-double-int-">randDepthWighExponentialDistribution</a></span>(double&nbsp;unifRand,
                                    int&nbsp;avgDepth)</code>
<div class="block">Return a maximum tree depth based on RulefFit (Friedman, Popescu.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDProbl.html#restoreBestWeight-java.util.ArrayList-">restoreBestWeight</a></span>(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;targetWeights)</code>
<div class="block">Restore the weight with minimum fitness.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.si.ijs.kt.clus.util.tools.optimization.OptProbl">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;si.ijs.kt.clus.util.tools.optimization.<a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a></h3>
<code><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#calcFitness-java.util.ArrayList-">calcFitness</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#calcFitnessForTarget-java.util.ArrayList-int-">calcFitnessForTarget</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#changeData-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-">changeData</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#changeRuleSetToUndoNormNormalization-si.ijs.kt.clus.algo.rules.ClusRuleSet-">changeRuleSetToUndoNormNormalization</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getLinDescrDim-int-">getLinDescrDim</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getLinTargetDim-int-">getLinTargetDim</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getMean-int-">getMean</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getNbOfInstances--">getNbOfInstances</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getNbOfTargets--">getNbOfTargets</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getNormFactor-int-">getNormFactor</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getNumVar--">getNumVar</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getPredictionsWhenCovered-int-int-int-">getPredictionsWhenCovered</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getPredictionsWhenCovered-int-int-int-int-">getPredictionsWhenCovered</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getRuleCovers-int-">getRuleCovers</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getRuleNextCovered-int-int-">getRuleNextCovered</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getSettings--">getSettings</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getTargetStat--">getTargetStat</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#getTrueValue-int-int-">getTrueValue</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#initMeans-int-">initMeans</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#initNormFactors-int-si.ijs.kt.clus.main.settings.Settings-">initNormFactors</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#isClassifTask--">isClassifTask</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#isCovered-int-int-">isCovered</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#isRuleTerm-int-">isRuleTerm</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#isValidValue-double-">isValidValue</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#loss-double:A:A-int-">loss</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#predictClass-double:A:A-">predictClass</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#preparePredictionsForNormalization--">preparePredictionsForNormalization</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#printPredictionsToFile-java.io.PrintWriter-">printPredictionsToFile</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#printTrueValuesToFile-java.io.PrintWriter-">printTrueValuesToFile</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#regularization-java.util.ArrayList-">regularization</a>, <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html#splitDataIntoValAndTrainSet-si.ijs.kt.clus.main.ClusStatManager-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-">splitDataIntoValAndTrainSet</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="m_printGDDebugInformation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_printGDDebugInformation</h4>
<pre>protected static&nbsp;boolean m_printGDDebugInformation</pre>
<div class="block">Do we print debugging information.</div>
</li>
</ul>
<a name="m_covariances">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_covariances</h4>
<pre>protected&nbsp;double[][] m_covariances</pre>
<div class="block">Covariances between weights. Are computed only if needed.
 [iFirstWeight][iSecondWeight]</div>
</li>
</ul>
<a name="m_isCovComputed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_isCovComputed</h4>
<pre>protected&nbsp;boolean[] m_isCovComputed</pre>
<div class="block">Is covariance computed for this dimension?
 To reduce computational costs, covariances for certain dimension are computed only if needed
 Weight is always zero if the corresponding coefficient is zero.
 This array SHOULD NOT be used for indication of nonzero weights.
 The covariance may be computed but the weight nonzero if (and only if)
 we are running the algorithm multiple times on the same predictions etc.</div>
</li>
</ul>
<a name="m_isWeightNonZero">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_isWeightNonZero</h4>
<pre>protected&nbsp;boolean[] m_isWeightNonZero</pre>
<div class="block">Is the weight nonzero for this run. If we are running optimization only once
 this is same as m_isCovComputed.</div>
</li>
</ul>
<a name="m_nbOfNonZeroRules">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_nbOfNonZeroRules</h4>
<pre>protected&nbsp;int m_nbOfNonZeroRules</pre>
<div class="block">Number of rules with nonzero weights. I.e. how many trues in m_isWeightNonZero.
 The 'default rule' - the first rule that is always a constant is not counted!</div>
</li>
</ul>
<a name="m_predCovWithTrue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_predCovWithTrue</h4>
<pre>protected&nbsp;double[] m_predCovWithTrue</pre>
<div class="block">Covariances between predictors and true values. If all the weights are zero,
 these are also the initial gradients before the first iteration.
 Weights are zero, so these do not have to be computed again
 when running with same predictions and true values (different T values).
 These are also used when computing gradients from scratch.</div>
</li>
</ul>
<a name="m_gradients">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_gradients</h4>
<pre>protected&nbsp;double[] m_gradients</pre>
<div class="block">Computed negative gradient averages for each of the dimensions
 [iWeight]</div>
</li>
</ul>
<a name="m_bannedWeights">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_bannedWeights</h4>
<pre>protected&nbsp;int[] m_bannedWeights</pre>
<div class="block">Includes the weights that are banned.
 One value for each of the weights, if value > nbOfIterations, weight is banned.</div>
</li>
</ul>
<a name="m_stepSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_stepSize</h4>
<pre>protected&nbsp;double m_stepSize</pre>
<div class="block">Step size for gradient descent</div>
</li>
</ul>
<a name="m_earlyStopProbl">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_earlyStopProbl</h4>
<pre>protected&nbsp;<a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl</a> m_earlyStopProbl</pre>
<div class="block">New problem for computing fitness function with the early stop data</div>
</li>
</ul>
<a name="m_dynStepLowerBound">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_dynStepLowerBound</h4>
<pre>double m_dynStepLowerBound</pre>
</li>
</ul>
<a name="m_minFitness">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>m_minFitness</h4>
<pre>protected&nbsp;double m_minFitness</pre>
<div class="block">List of old fitnesses for plateau detection (andy for debugging)</div>
</li>
</ul>
<a name="m_minFitWeights">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>m_minFitWeights</h4>
<pre>protected&nbsp;java.util.ArrayList&lt;java.lang.Double&gt; m_minFitWeights</pre>
<div class="block">Weights when the Fitness was minimum</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GDProbl-si.ijs.kt.clus.main.ClusStatManager-si.ijs.kt.clus.util.tools.optimization.OptProbl.OptParam-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GDProbl</h4>
<pre>public&nbsp;GDProbl(<a href="../../../../../../../si/ijs/kt/clus/main/ClusStatManager.html" title="class in si.ijs.kt.clus.main">ClusStatManager</a>&nbsp;stat_mgr,
               <a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/OptProbl.OptParam.html" title="class in si.ijs.kt.clus.util.tools.optimization">OptProbl.OptParam</a>&nbsp;optInfo)</pre>
<div class="block">Constructor for problem to be solved with gradient descent. Currently only for regression.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stat_mgr</code> - Statistics</dd>
<dd><code>dataInformation</code> - The true values and predictions for the instances. These are used by OptimProbl.
        The optimization procedure is based on this data information</dd>
<dd><code>isClassification</code> - Is it classification or regression?</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initGDForNewRunWithSamePredictions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initGDForNewRunWithSamePredictions</h4>
<pre>public&nbsp;void&nbsp;initGDForNewRunWithSamePredictions()</pre>
<div class="block">Initialize GD optimization for new run with same predictions and true values
 This can be used if some parameters change. Thus we e.g. do not compute covariances
 again</div>
</li>
</ul>
<a name="computeDynStepSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDynStepSize</h4>
<pre>private&nbsp;void&nbsp;computeDynStepSize()</pre>
</li>
</ul>
<a name="getInitialWeightVector--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialWeightVector</h4>
<pre>protected&nbsp;java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;getInitialWeightVector()</pre>
<div class="block">Generates a zero vector.</div>
</li>
</ul>
<a name="getCovForPrediction-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCovForPrediction</h4>
<pre>protected final&nbsp;double&nbsp;getCovForPrediction(int&nbsp;iPred)</pre>
</li>
</ul>
<a name="initPredictorVsTrueValuesCovariances--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initPredictorVsTrueValuesCovariances</h4>
<pre>protected&nbsp;void&nbsp;initPredictorVsTrueValuesCovariances()</pre>
<div class="block">Compute covariances between predictors and true values. With all zero weight vector these are also
 initial gradients before first iteration.</div>
</li>
</ul>
<a name="computePredVsTrueValueCov-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computePredVsTrueValueCov</h4>
<pre>private&nbsp;double&nbsp;computePredVsTrueValueCov(int&nbsp;iPred)</pre>
<div class="block">Estimate of expected value of covariance for given prediction.
 The covariance of this prediction with its true value is returned.</div>
</li>
</ul>
<a name="getWeightCov-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWeightCov</h4>
<pre>protected final&nbsp;double&nbsp;getWeightCov(int&nbsp;iFirst,
                                    int&nbsp;iSecond)</pre>
<div class="block">Return the right stored covariance</div>
</li>
</ul>
<a name="computeWeightCov-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeWeightCov</h4>
<pre>private&nbsp;void&nbsp;computeWeightCov(int&nbsp;dimension)</pre>
<div class="block">Compute the covariances for this weight/prediction dimension. This means that
 we compute all the pairs where this takes part.
 Because for covariance
 cov(a,b) = cov(b,a) compute only one of them.</div>
</li>
</ul>
<a name="computeCovFor2Preds-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCovFor2Preds</h4>
<pre>private&nbsp;double&nbsp;computeCovFor2Preds(int&nbsp;iPrevious,
                                   int&nbsp;iLatter)</pre>
<div class="block">Compute covariance between two predictions (base learner predictions).
 This is a help function for computeWeightCov
 NOTE: Second parameter index HAS to be greater or equal to first</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iPrevious</code> - Base learner index</dd>
<dd><code>iLatter</code> - Base learner index. NOTE: iLatter >= iPrevious</dd>
</dl>
</li>
</ul>
<a name="computeCovFor2Lin-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCovFor2Lin</h4>
<pre>private&nbsp;double&nbsp;computeCovFor2Lin(int&nbsp;iPrevious,
                                 int&nbsp;iLatter)</pre>
<div class="block">For two linear terms.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iPrevious</code> - </dd>
<dd><code>iLatter</code> - Rule index. NOTE: iLatter >= iPrevious</dd>
</dl>
</li>
</ul>
<a name="computeCovForRuleAndLin-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCovForRuleAndLin</h4>
<pre>private&nbsp;double&nbsp;computeCovForRuleAndLin(int&nbsp;iRule,
                                       int&nbsp;iLinear)</pre>
<div class="block">For rule and linear term we skip the instances rule does not cover.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iRule</code> - Rule index.</dd>
<dd><code>iLinear</code> - Linear term index. NOTE: iLinear >= iRule</dd>
</dl>
</li>
</ul>
<a name="computeCovFor2Rules-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCovFor2Rules</h4>
<pre>private&nbsp;double&nbsp;computeCovFor2Rules(int&nbsp;iPrevious,
                                   int&nbsp;iLatter)</pre>
<div class="block">For rules the prediction is always the same. We first count: how many
 instances both rules cover (prediction != 0). Then the covariance is
 pred1*pred2*([nb both rules cover]/[nb of instances])</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iPrevious</code> - </dd>
<dd><code>iLatter</code> - Rule index. NOTE: iLatter >= iPrevious</dd>
</dl>
</li>
</ul>
<a name="predictWithRule-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>predictWithRule</h4>
<pre>protected final&nbsp;double&nbsp;predictWithRule(int&nbsp;iRule,
                                       int&nbsp;iInstance,
                                       int&nbsp;iTarget)</pre>
<div class="block">Returns the real prediction when this rule is used. If the rule does
 not give prediction for some target, default rule is used.
 ONLY FOR REGRESSION! Classification not implemented.</div>
</li>
</ul>
<a name="fullGradientComputation-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fullGradientComputation</h4>
<pre>public&nbsp;void&nbsp;fullGradientComputation(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</pre>
<div class="block">Compute the gradients for weights from scratch</div>
</li>
</ul>
<a name="getGradient-int-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGradient</h4>
<pre>protected&nbsp;double&nbsp;getGradient(int&nbsp;iWeightDim,
                             java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</pre>
<div class="block">Compute gradient for the given weight dimension</div>
</li>
</ul>
<a name="gradientSquared-int-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gradientSquared</h4>
<pre>private&nbsp;double&nbsp;gradientSquared(int&nbsp;iGradWeightDim,
                               java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</pre>
<div class="block">Squared loss gradient. p. 18 in Friedman & Popescu, 2004</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iGradWeightDim</code> - Weight dimension for which the gradient is computed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Gradient average</dd>
</dl>
</li>
</ul>
<a name="modifyGradients-int:A-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modifyGradients</h4>
<pre>protected final&nbsp;void&nbsp;modifyGradients(int[]&nbsp;changedWeightIndex,
                                     java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</pre>
<div class="block">Recompute the gradients new iteration.
 This is lot of faster than computing everything from the scratch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>changedWeightIndex</code> - The index of weights that have changed. Only these affect the change in the new gradient.
        Friedman&Popescu p.18</dd>
</dl>
</li>
</ul>
<a name="modifyGradientSquared-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>modifyGradientSquared</h4>
<pre>public&nbsp;void&nbsp;modifyGradientSquared(int[]&nbsp;iChangedWeights)</pre>
<div class="block">Recomputation of gradients for least squares loss function</div>
</li>
</ul>
<a name="getMaxGradients-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxGradients</h4>
<pre>public&nbsp;int[]&nbsp;getMaxGradients(int&nbsp;nbOfIterations)</pre>
<div class="block">Return the gradients with maximum absolute value. For the weights we want to change
 The function is assuming (if max allowed rule nb is set) that index 0 of gradients includes
 the "default rule" which is not counted.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nbOfIterations</code> - Used for detecting if weight is banned (not usually used)</dd>
</dl>
</li>
</ul>
<a name="howMuchWeightChanges-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>howMuchWeightChanges</h4>
<pre>public final&nbsp;double&nbsp;howMuchWeightChanges(int&nbsp;iTargetWeight)</pre>
<div class="block">Compute the change of target weight because of the gradient</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>iTargetWeight</code> - Weight index we want to change.</dd>
</dl>
</li>
</ul>
<a name="computeCovariancesIfNeeded-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeCovariancesIfNeeded</h4>
<pre>public&nbsp;void&nbsp;computeCovariancesIfNeeded(int&nbsp;iWeight)</pre>
<div class="block">Compute the needed covariances for the weight. Only called
 if we are going to change the weight.</div>
</li>
</ul>
<a name="dropStepSize-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropStepSize</h4>
<pre>public final&nbsp;void&nbsp;dropStepSize(double&nbsp;amount)</pre>
<div class="block">In case of oscillation, make the step size shorter
 We should be changing the step size just enough not to prevent further oscillation</div>
</li>
</ul>
<a name="getBestFitness--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBestFitness</h4>
<pre>public&nbsp;double&nbsp;getBestFitness()</pre>
<div class="block">Returns best fitness so far.</div>
</li>
</ul>
<a name="isEarlyStop-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEarlyStop</h4>
<pre>public&nbsp;boolean&nbsp;isEarlyStop(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;weights)</pre>
<div class="block">Early stopping is needed if the error rate is too much bigger than the smallest error rate
 we have had.</div>
</li>
</ul>
<a name="restoreBestWeight-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreBestWeight</h4>
<pre>public&nbsp;void&nbsp;restoreBestWeight(java.util.ArrayList&lt;java.lang.Double&gt;&nbsp;targetWeights)</pre>
<div class="block">Restore the weight with minimum fitness.</div>
</li>
</ul>
<a name="randDepthWighExponentialDistribution-double-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>randDepthWighExponentialDistribution</h4>
<pre>public static&nbsp;int&nbsp;randDepthWighExponentialDistribution(double&nbsp;unifRand,
                                                       int&nbsp;avgDepth)</pre>
<div class="block">Return a maximum tree depth based on RulefFit (Friedman, Popescu. 2005) function used.
 Function is Pr(nbOfLeaves) = exp(-nbOfLeaves/(avgDepth/2))/(avgDepth-2).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>unifRand</code> - Random uniform number on which the number is based on.</dd>
<dd><code>avgDepth</code> - Average depth (L in RuleFit).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Random depth</dd>
</dl>
</li>
</ul>
<a name="printGradientsToFile-int-java.io.PrintWriter-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>printGradientsToFile</h4>
<pre>public&nbsp;void&nbsp;printGradientsToFile(int&nbsp;iterNro,
                                 java.io.PrintWriter&nbsp;wrt)</pre>
<div class="block">Print gradients to output file.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GDProbl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/GDAlg.html" title="class in si.ijs.kt.clus.util.tools.optimization"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../../../si/ijs/kt/clus/util/tools/optimization/ImplicitLinearTerms.html" title="class in si.ijs.kt.clus.util.tools.optimization"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../index.html?si/ijs/kt/clus/util/tools/optimization/GDProbl.html" target="_top">Frames</a></li>
<li><a href="GDProbl.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.si.ijs.kt.clus.util.tools.optimization.OptProbl">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
